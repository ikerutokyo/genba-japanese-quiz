<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ç¾å ´æ—¥æœ¬èª éŸ³å£°ã‚¯ã‚¤ã‚º</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  text-align: center;
  padding: 20px;
}

h2 {
  margin-bottom: 16px;
}

button {
  width: auto;
  min-width: 200px;
  max-width: 90%;
  padding: 14px 18px;
  margin: 10px auto;
  font-size: 18px;
  border-radius: 12px;
  border: 1px solid #ccc;
  background: #f0f0f0;
  display: block;
  color: #000;
}

button.correct {
  background: #b6e7b9;
  border-color: #2e7d32;
  font-weight: bold;
}

button.wrong {
  background: #f5b7b1;
  border-color: #c62828;
  font-weight: bold;
}

#nextBtn {
  margin-top: 20px;
  display: none;
}
</style>
</head>

<body>

<h2>ğŸ§ éŸ³ã‚’èã„ã¦ãˆã‚‰ã‚“ã§ã­</h2>

<p id="counter"></p>

<audio id="audio" controls></audio>

<div id="choices"></div>

<button id="nextBtn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œ â–¶ï¸</button>

<script>
const questionData = [
  { audio: "kite.m4a", text: "áŸá¼á˜â€‹á˜á€â€‹á•á„" },
  { audio: "itte.m4a", text: "áŸá¼á˜â€‹á‘áŸ…â€‹á•á„" },
  { audio: "motte.m4a", text: "áŸá¼á˜â€‹á™á€â€‹á•á„" },
  { audio: "oite.m4a", text: "áŸá¼á˜â€‹áŠá¶á€áŸ‹â€‹á•á„" },
  { audio: "tsukete.m4a", text: "áŸá¼á˜â€‹áŠá¶á€áŸ‹â€‹á•á„" },
  { audio: "totte.m4a", text: "áŸá¼á˜â€‹á™á€â€‹á•á„" },
  { audio: "yatte.m4a", text: "áŸá¼á˜â€‹á’áŸ’áœá¾â€‹á•á„" },
  { audio: "kakunin.m4a", text: "áŸá¼á˜â€‹á–á·á“á·ááŸ’á™â€‹á•á„" },
  { audio: "check.m4a", text: "áŸá¼á˜â€‹ááŸ’ášá½áá–á·á“á·ááŸ’á™â€‹á•á„" },
  { audio: "agatte.m4a", text: "áŸá¼á˜â€‹á¡á¾á„â€‹á•á„" },
  { audio: "orite.m4a", text: "áŸá¼á˜â€‹á…á»áŸ‡" }
];

const totalQuestions = 20;
let currentQuestion = 0;
let correctCount = 0;
let currentCorrectText = "";

const audio = document.getElementById("audio");
const choicesDiv = document.getElementById("choices");
const nextBtn = document.getElementById("nextBtn");
const counter = document.getElementById("counter");

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

function loadQuestion() {
  choicesDiv.innerHTML = "";
  nextBtn.style.display = "none";

  counter.textContent = `å•é¡Œ ${currentQuestion + 1} / ${totalQuestions}`;

  const correct =
    questionData[Math.floor(Math.random() * questionData.length)];
  currentCorrectText = correct.text;

  audio.src = correct.audio;
  audio.load();

  const wrongs = shuffle(
    questionData.filter(q => q.text !== correct.text)
  ).slice(0, 2);

  const options = shuffle([correct, ...wrongs]);

  options.forEach(option => {
    const btn = document.createElement("button");
    btn.textContent = option.text;
    btn.onclick = () =>
      checkAnswer(btn, option.text === currentCorrectText);
    choicesDiv.appendChild(btn);
  });
}

function checkAnswer(button, isCorrect) {
  const buttons = document.querySelectorAll("#choices button");

  // ã™ã¹ã¦ã®ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
  buttons.forEach(btn => (btn.disabled = true));

  if (isCorrect) {
    button.classList.add("correct");
    button.textContent = "â­•ï¸ " + button.textContent;
    correctCount++;
  } else {
    button.classList.add("wrong");
    button.textContent = "âœ–ï¸ " + button.textContent;

    // æ­£è§£ã‚’è¡¨ç¤º
    buttons.forEach(btn => {
      if (btn.textContent === currentCorrectText) {
        btn.classList.add("correct");
        btn.textContent = "â­•ï¸ " + btn.textContent;
      }
    });
  }

  nextBtn.style.display = "block";
}

function nextQuestion() {
  currentQuestion++;

  if (currentQuestion >= totalQuestions) {
    showResult();
  } else {
    loadQuestion();
  }
}

function showResult() {
  document.body.innerHTML = `
    <h2>ğŸ‰ ãŠã¤ã‹ã‚Œã•ã¾ï¼</h2>
    <p style="font-size:22px;">
      ${totalQuestions}å•ä¸­ <strong>${correctCount}</strong> å• æ­£è§£ï¼
    </p>
  `;
}

loadQuestion();
</script>

</body>
</html>